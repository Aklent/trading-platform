"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7795],{10675:function(e,t,n){var l=n(71600);t.Z=void 0,function(e,t){if((!e||!e.__esModule)&&null!==e&&("object"==typeof e||"function"==typeof e)){var n=a(void 0);if(n&&n.has(e))return n.get(e);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(l,o,s):l[o]=e[o]}l.default=e,n&&n.set(e,l)}}(n(2784));var r=l(n(94834)),o=n(52322);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var s=(0,r.default)((0,o.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook");t.Z=s},23858:function(e,t,n){var l=n(71600);t.Z=void 0,function(e,t){if((!e||!e.__esModule)&&null!==e&&("object"==typeof e||"function"==typeof e)){var n=a(void 0);if(n&&n.has(e))return n.get(e);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(l,o,s):l[o]=e[o]}l.default=e,n&&n.set(e,l)}}(n(2784));var r=l(n(94834)),o=n(52322);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var s=(0,r.default)((0,o.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");t.Z=s},27795:function(e,t,n){let l,r;n.r(t),n.d(t,{default:function(){return T}});var o=n(52322),a=n(10675),s=n(23858),i=n(88896),u=n(55288),c=n(98318),d=n(99220),p=n(60750),f=n(35332),m=n(55469),h=n(10138),v=n(79742),g=n(89644),x=n.n(g),w=n(35368),b=n.n(w),y=n(5632),j=n(2784),N=((l=N||{}).Mouse="mouse",l.Touch="touch",l.Pointer="pointer",l),E=((r=E||{}).CancelledByMovement="cancelled-by-movement",r.CancelledByRelease="cancelled-by-release",r.CancelledOutsideElement="cancelled-outside-element",r);let k=["mousedown","mousemove","mouseup","mouseleave","mouseout"],C=["touchstart","touchmove","touchend","touchcancel"],P=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function O(e){var t;return C.includes(null==(t=null==e?void 0:e.nativeEvent)?void 0:t.type)||"touches"in e}function M(e){var t;return k.includes(null==(t=null==e?void 0:e.nativeEvent)?void 0:t.type)||O(e)||function(e){let{nativeEvent:t}=e;return!!t&&(P.includes(null==t?void 0:t.type)||"pointerId"in t)}(e)}function S(e){var t;let n=O(e)?null==(t=null==e?void 0:e.touches)?void 0:t[0]:e;return"object"==typeof n&&null!==n&&"pageX"in n&&"number"==typeof n.pageX&&"pageY"in n&&"number"==typeof n.pageY?{x:n.pageX,y:n.pageY}:null}var T=()=>{let e=(0,m.T)(),t=(0,y.useRouter)(),[n,l]=(0,j.useState)(""),[r,g]=(0,j.useState)(!1),[w,k]=(0,j.useState)(""),[C,P]=(0,j.useState)(!1),[O,T]=(0,j.useState)(""),[R,Z]=(0,j.useState)(!1),[_,B]=(0,j.useState)(!1),L=(0,m.C)(f.Gt),[I,A]=(0,j.useState)(!1),[q,D]=(0,j.useState)(!1),[G,W]=(0,j.useState)({email:"",profilePhotoId:"",name:""});!function(e,{threshold:t=400,captureEvent:n=!1,detect:l=N.Pointer,cancelOnMovement:r=!1,cancelOutsideElement:o=!0,filterEvents:a,onStart:s,onMove:i,onFinish:u,onCancel:c}={}){let d=(0,j.useRef)(!1),p=(0,j.useRef)(!1),f=(0,j.useRef)(),m=(0,j.useRef)(),h=(0,j.useRef)(e),v=(0,j.useRef)(null),g=(0,j.useCallback)(e=>l=>{p.current||M(l)&&(void 0===a||a(l))&&(n&&l.persist(),null==s||s(l,{context:e}),v.current=S(l),p.current=!0,f.current=l.currentTarget,m.current=setTimeout(()=>{h.current&&(h.current(l,{context:e}),d.current=!0)},t))},[n,a,s,t]),x=(0,j.useCallback)(e=>(t,l)=>{M(t)&&p.current&&(v.current=null,n&&t.persist(),d.current?null==u||u(t,{context:e}):p.current&&(null==c||c(t,{context:e,reason:l??E.CancelledByRelease})),d.current=!1,p.current=!1,void 0!==m.current&&clearTimeout(m.current))},[n,u,c]),w=(0,j.useCallback)(e=>t=>{if(M(t)&&(null==i||i(t,{context:e}),!1!==r&&v.current)){let n=S(t);if(n){let l=!0===r?25:r,o={x:Math.abs(n.x-v.current.x),y:Math.abs(n.y-v.current.y)};(o.x>l||o.y>l)&&x(e)(t,E.CancelledByMovement)}}},[x,r,i]);(0,j.useCallback)(t=>{if(null===e)return{};switch(l){case N.Mouse:{let e={onMouseDown:g(t),onMouseMove:w(t),onMouseUp:x(t)};return o&&(e.onMouseLeave=e=>{x(t)(e,E.CancelledOutsideElement)}),e}case N.Touch:return{onTouchStart:g(t),onTouchMove:w(t),onTouchEnd:x(t)};case N.Pointer:{let e={onPointerDown:g(t),onPointerMove:w(t),onPointerUp:x(t)};return o&&(e.onPointerLeave=e=>x(t)(e,E.CancelledOutsideElement)),e}}},[e,x,o,l,w,g]),(0,j.useEffect)(()=>{function e(e){let t={target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:()=>{}};x()(t)}return window.addEventListener("mouseup",e),window.addEventListener("touchend",e),window.addEventListener("pointerup",e),()=>{window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),window.removeEventListener("pointerup",e)}},[x]),(0,j.useEffect)(()=>()=>{void 0!==m.current&&clearTimeout(m.current)},[]),(0,j.useEffect)(()=>{h.current=e},[e])}((0,j.useCallback)(()=>{window.isMobileApp&&(0,v.oi7)({key:"BASE_URL_SCREEN"})},[]),{threshold:1e4,captureEvent:!0,cancelOnMovement:!1,cancelOutsideElement:!0});let[F,U]=(0,j.useState)(!1),V=(0,m.C)(f.tT),z=()=>{U(!0),l(G.email)};(0,j.useEffect)(()=>{(0,v.nw3)().then(e=>{e&&W(e)})},[]),(0,j.useEffect)(()=>{G&&G.name.length>0&&z()},[null==G?void 0:G.name]),(0,j.useEffect)(()=>{(async()=>{try{let e=window.gapi;if(!e){console.error("Google API not loaded");return}e.load("auth2",()=>{let t=e.auth2.init({client_id:"110773038674-vbcuntgids8hn19hchlj6gstvu12r95d.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"});!function(e){if(!e){console.error("Element not found");return}t.attachClickHandler(e,{},e=>{K(e)},e=>{console.error("Google Sign-in error",e)})}(document.getElementById("customBtn"))})}catch(e){console.error("Error loading Google API",e)}})()},[]);let J=async n=>{var l,r,o,a;v.V1j.set("webengage_set",!1,!0);let s=await (0,v.BT$)(null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.sessionKey);(null==s?void 0:s.data)&&((0,v.ZKv)(s.data),e((0,f.SP)(!0)),e((0,f.XG)(null==s?void 0:s.data)));let i=await (0,v.B4j)(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.sessionKey,null==s?void 0:s.data,null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.refreshToken);new h.Z(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.sessionKey),(null==i?void 0:i.userData)&&e((0,f.M)(i.userData)),""!==L?(t.push(L),e((0,f.Yj)(""))):t.push("/")},K=e=>{let t=JSON.stringify({accessToken:e.getAuthResponse().id_token,socialPlatform:"GOOGLE"});x().post("/tnpsuite-core/social/login",t,{headers:{"Content-Type":"application/json","x-requester-client":"webapp"}}).then(async e=>{J(e)},e=>{window.gapi.auth2.getAuthInstance().signOut(),(0,v.Nqu)({type:v.Ixf.ERROR,message:e.description||e.data.description})}).finally(()=>{A(!1)})},X=e=>{"email"===e?0==n.trim().length?g(!0):g(!1):"password"===e?0===w.trim().length?P(!0):P(!1):"totp"===e&&(0===w.trim().length?Z(!0):Z(!1))},Y=(e,t)=>{let n=b().sanitize(e.target.value);"username"===t?(l(n),n.length<=0?g(!0):g(!1)):"password"===t?(k(n),n.length<=0?P(!0):P(!1)):"totp"===t&&(T(n),n.length<=0?Z(!0):Z(!1))};return(0,o.jsx)("div",{className:"flex justify-center items-center h-screen min-w-full",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center w-full max-w-md p-8 lg:p-6 bg-white rounded-lg shadow-none",children:[(0,o.jsxs)("div",{className:"mb-8 lg:mb-4 w-full",children:[(0,o.jsx)("h1",{className:"text-gray-500 text-3xl",children:"Sign in"}),(0,o.jsx)("p",{className:"neutral-400 text-sm mt-1",children:"Enter your details below"})]}),(0,o.jsxs)("div",{id:"customBtn",className:"w-full hidden lg:flex justify-center items-center bg-red-700 text-white p-2 rounded mb-4 cursor-pointer",children:[(0,o.jsx)(s.Z,{className:"mr-2 !text-lg"}),(0,o.jsx)("p",{className:"font-bold text-white text-sm",children:"Login via Google"})]}),(0,o.jsxs)("div",{onClick:()=>{(0,v.Nqu)({type:v.Ixf.ERROR,message:"Facebook login is currently unavailable for this app!"})},className:"w-full hidden lg:flex justify-center items-center bg-[#3b5998] text-white p-2 rounded mb-2 cursor-pointer",children:[(0,o.jsx)(a.Z,{className:"mr-2 !text-lg"}),(0,o.jsx)("p",{className:"font-bold text-white text-sm",children:"Login via Facebook"})]}),(0,o.jsx)(i.Z,{className:"!w-full !my-6 !hidden lg:!block"}),(0,o.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!q&&(r||C)){(0,v.Nqu)({type:v.Ixf.WARNING,message:"Please fill the required fields!"});return}if(q)x().post("/tnpsuite-core/reset_password_link_request",{email:n},{headers:{"Content-Type":"application/json","x-requester-client":"webapp"}}).then(()=>{D(!1)}).finally(()=>{(0,v.Nqu)({type:v.Ixf.SUCCESS,message:"Password reset instructions has been sent to your mail id"})});else{A(!0);let e={username:n,password:w};_&&(e.totp=O),(0,v.DBy)(e).then(e=>{J(e)},e=>{let t=!1;if(e.response){let r;try{var n,l;(null==(r=JSON.parse(JSON.stringify(e.response)))?void 0:null===(n=r.data)||void 0===n?void 0:n.data)&&(null==r?void 0:null===(l=r.data)||void 0===l?void 0:l.name)==="user.mfa"&&(B(!0),t=!0)}catch(e){console.error("Parsing Json Error")}}t||k("")}).catch(e=>{console.error("error: in catch block",e)}).finally(()=>{A(!1)})}},noValidate:!0,className:"w-full",children:[F?(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,o.jsx)("div",{className:"col-span-3 justify-self-center",children:(0,o.jsx)(u.Z,{alt:"User profile picture",src:G?"".concat(v._zO.getS3BaseUrl()).concat(G.profilePhotoId):"",sx:{width:60,height:60},children:G?G.name[0]:""})}),(0,o.jsx)("div",{className:"col-span-9",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-lg font-medium text-gray-800 font-sans mb-1.5",children:["Welcome Back"," ",G?G.name:"","!"]}),(0,o.jsxs)("a",{className:"text-base no-underline cursor-pointer text-blue-400",onClick:()=>{l(""),(0,v.NDv)(!0,V),U(!1)},children:["Not"," ",G?G.name:"","?"]})]})})]})}):"",!F&&(0,o.jsx)(c.Z,{className:"!w-full !mb-4",children:(0,o.jsx)(d.Z,{error:r,variant:"outlined",label:"Email",type:"email",placeholder:"Email",fullWidth:!0,required:!0,value:n,onChange:e=>Y(e,"username"),onBlur:()=>X("email"),className:"!w-full",InputProps:{classes:{input:"!text-base"}},inputProps:{autoComplete:"username"},helperText:r?"Email cannot be blank":""})}),!q&&(0,o.jsx)(c.Z,{className:"!w-full !mb-4",children:(0,o.jsx)(d.Z,{error:C,variant:"outlined",label:"Password",type:"password",placeholder:"Password",fullWidth:!0,required:!0,value:w,onChange:e=>Y(e,"password"),onBlur:()=>X("password"),className:"!w-full",helperText:C?"Password cannot be blank":"",InputProps:{classes:{input:"!text-base"}},inputProps:{autoComplete:"current-password"}})}),_&&(0,o.jsx)(c.Z,{className:"w-full mb-2",children:(0,o.jsx)(d.Z,{error:R,variant:"outlined",label:"MFA Code",type:"text",placeholder:"MFA Code - from Google Authenticator",fullWidth:!0,required:!0,value:O,onChange:e=>Y(e,"totp"),onBlur:()=>X("totp"),className:"w-full mb-2",helperText:R?" MFA Code cannot be blank":"",InputProps:{classes:{input:"!text-base"}}})}),(0,o.jsx)(v.Ain,{type:"submit",variant:"contained",className:"!bg-blue-500 text-white !p-2 !rounded !mt-2 !w-full",children:q?"Request Reset Link via Email":"Login"})]}),(0,o.jsxs)("div",{className:"flex justify-end w-full mt-4 text-sm gap-2",children:[(0,o.jsx)(p.Z,{onClick:()=>D(!q),className:"!cursor-pointer !text-blue-400",children:q?"<Back To Login":"Forgot Password"}),(0,o.jsx)(p.Z,{href:"/join/#/",className:"!cursor-pointer !text-blue-400",children:"Sign Up"}),(0,o.jsx)(p.Z,{href:"/support/#/",className:"!cursor-pointer !text-blue-400",children:"Student Help"})]})]})})}}}]);
//# sourceMappingURL=7795-06d648fc93ae0b7b.js.map